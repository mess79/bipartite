parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"IJpp":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=-1;module.exports={clone:function(e){return e=JSON.parse(JSON.stringify(e))},id:function(){return++t},objectTypeValidate:function(t,n){switch(n){case"array":Array.isArray(t)||(t=t?[t]:[]);break;case"object":("object"!==e(t)||null===t||Array.isArray(t))&&(t={})}return t},update:function(t,n){return function t(n,r){for(var o in r)"object"===e(r[o])&&Object.keys(r[o]).length>0?(n[o]||(n[o]={}),t(n[o],r[o])):"string"!=typeof r[o]&&"boolean"!=typeof r[o]||(n[o]=r[o])}(t=this.clone(t),n=this.clone(n)),t},remove:function(t,n){return function t(n,r){for(var o in r)!1===r[o]?delete n[o]:"object"===e(r[o])&&Object.keys(r[o]).length>0&&t(n[o],r[o])}(t=this.clone(t),n=this.clone(n)),t},compare:function(t,n){var r={updated:{},removed:{},added:{}};return function t(n,r,o,c,i){var u=function(u){if(Array.isArray(n[u])){var a=r[u].filter(function(e){return!n[u].includes(e)}),f=n[u].filter(function(e){return!r[u].includes(e)});(a.length>0||f>0)&&(i[u]=a,c[u]=f,o[u]=r[u])}else r[u]===n[u]||("object"===e(n[u])&&null!==n[u]&&Object.keys(n[u]).length>0?(o[u]||(o[u]={}),c[u]||(c[u]={}),i[u]||(i[u]={}),t(n[u],r[u],o[u],c[u],i[u])):n[u]?(o[u]=r[u],c[u]=n[u]):(o[u]=r[u],i[u]=r[u]))};for(var a in r)u(a)}(t=this.clone(t),n=this.clone(n),r.updated,r.removed,r.added),function t(n,r,o){for(var c in n)r[c]?"object"===e(n[c])&&null!==n[c]&&Object.keys(n[c]).length>0&&t(n[c],r[c],o[c]):o[c]=n[c]}(t,n,r.removed),r},prune:function(t,n){var r={};return function t(n,r,o){for(var c in r){var i=r[c],u="";if((r[c].type||r[c].default)&&(i=r[c].type,r[c].default&&(u=r[c].default)),n&&"object"===e(i)&&null!==n[c]&&Object.keys(n).length>0&&(o[c]={},t(n[c],r[c],o[c])),u&&!n[c])o[c]=u;else if(n)switch(i){case String:"string"==typeof n[c]&&(o[c]=n[c]);break;case Number:"number"==typeof n[c]&&(o[c]=n[c]);break;case Boolean:"boolean"==typeof n[c]?o[c]=n[c]:"true"!==n[c]&&"false"!==n[c]||(o[c]="true"===n[c]);break;case Array:Array.isArray(n[c])&&(o[c]=n[c])}}}(t,n,r),r},query:function(t,n){var r=!0;return function t(n,o){for(var c in o)"object"===e(o[c])&&Object.keys(o[c]).length>0?t(n[c],o[c]):n[c]!==o[c]&&(r=!1)}(t,n),r}};
},{}],"er3Z":[function(require,module,exports) {
function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}var t=require("./lib.js"),o=function(){function n(r){e(this,n),this.obj=r}return r(n,[{key:"prune",value:function(e){return t.prune(e,this.obj)}}]),n}();module.exports=o;
},{"./lib.js":"IJpp"}],"ozwR":[function(require,module,exports) {
function t(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=e(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,u=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return l=t.done,t},e:function(t){u=!0,s=t},f:function(){try{l||null==o.return||o.return()}finally{if(u)throw s}}}}function e(t,e){if(t){if("string"==typeof t)return n(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}var s=require("./lib.js"),l=function(){function e(t){o(this,e),this.controllers=[],this.obj=s.clone(t),this.change={},t._id?this.id=t._id:this.id=s.id()}return i(e,[{key:"controller_push",value:function(e){var n,o=t(this.controllers);try{for(o.s();!(n=o.n()).done;){n.value.eventUpdate(e,this)}}catch(r){o.e(r)}finally{o.f()}}},{key:"addController",value:function(t){this.controllers.push(t),this.controller_push("update")}},{key:"removeController",value:function(t){this.controllers.splice(this.controllers.indexOf(view),1)}},{key:"update",value:function(t){t&&(this.previousObj=s.clone(this.obj),this.obj=s.update(this.previousObj,t),this.schema&&(this.obj=this.schema.prune(this.obj)),this.change=s.compare(this.previousObj,this.obj),this.controller_push("update",this))}},{key:"remove",value:function(t){t&&(this.previousObj=s.clone(this.obj),this.obj=s.remove(this.previousObj,t),this.schema&&(this.obj=this.schema.prune(this.obj)),this.change=s.compare(this.previousObj,this.obj),this.controller_push("remove",this))}},{key:"destroy",value:function(){this.controller_push("destroy",this)}},{key:"detach",value:function(){console.log("detching from model")}},{key:"save",value:function(){this.controller_push("save",this)}},{key:"load",value:function(){this.controller_push("load",this)}}]),e}();module.exports=l;
},{"./lib.js":"IJpp"}],"VhRB":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,module.exports.once=m,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function v(e,t,n,i){var o,s,v;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),v=s[t]),void 0===v)v=s[t]=n,++e._eventsCount;else if("function"==typeof v?v=s[t]=i?[n,v]:[v,n]:i?v.unshift(n):v.push(n),(o=f(e))>0&&v.length>o&&!v.warned){v.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=v.length,r(l)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function a(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function m(e,t){return new Promise(function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)})}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var v=f.length,l=p(f,v);for(r=0;r<v;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return v(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return v(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,c(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,c(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return a(this,e,!0)},o.prototype.rawListeners=function(e){return a(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"Ta8a":[function(require,module,exports) {
function e(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=t(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}function t(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var a=require("events"),u=require("./lib.js"),s=function(){function t(n,o){r(this,t),this.event=new a.EventEmitter,o&&(o.url&&(this.url=o.url),o.schema&&(this.schema=o.schema)),this.id=u.id(),this.obj=[];var i,s=e(u.objectTypeValidate(n,"array"));try{for(s.s();!(i=s.n()).done;){var c=i.value;this.listeners(c)}}catch(l){s.e(l)}finally{s.f()}}return i(t,[{key:"add",value:function(e){this.listeners(e),this.event.emit("add",this.obj,e)}},{key:"listeners",value:function(e){var t=this;function n(e){t.event.emit("update",e)}function r(e){t.event.emit("remove",e)}function o(e){t.event.emit("destroy",e)}function i(e){t.event.emit("load",e)}function a(e){t.event.emit("save",e)}this.schema&&(e.schema=this.schema,e.obj=this.schema.prune(e.obj)),e.event.addListener("update",n),e.event.addListener("remove",r),e.event.addListener("destroy",o),e.event.addListener("load",i),e.event.addListener("save",a),e.event.addListener("detach",function u(s){s===t&&(e.event.removeListener("update",n),e.event.removeListener("remove",r),e.event.removeListener("destroy",o),e.event.removeListener("load",i),e.event.removeListener("save",a),e.event.removeListener("detach",u),e.schema={})}),this.obj=this.obj.concat(u.objectTypeValidate(e,"array"))}},{key:"update",value:function(t,n){var r,o=e(this.obj);try{for(o.s();!(r=o.n()).done;){var i=r.value;n&&!u.query(i.obj,n)||i.update(t)}}catch(a){o.e(a)}finally{o.f()}}},{key:"remove",value:function(t,n){var r,o=e(this.obj);try{for(o.s();!(r=o.n()).done;){var i=r.value;n&&!u.query(i.obj,n)||i.remove(t)}}catch(a){o.e(a)}finally{o.f()}}},{key:"detach",value:function(e){e?(e.event.emit("detach",this),this.event.emit("detach",e)):console.log("no model to detach from collection")}},{key:"findAndDetach",value:function(t){var n,r=e(this.obj);try{for(r.s();!(n=r.n()).done;){var o=n.value;Object.keys(t).length>0&&u.query(o.obj,t)&&this.detach(o)}}catch(i){r.e(i)}finally{r.f()}}},{key:"destroyCollection",value:function(){this.event.emit("destroyCollection")}},{key:"save",value:function(){this.event.emit("save")}},{key:"load",value:function(){this.event.emit("load")}},{key:"models",value:function(){return this.obj.map(function(e){return e.obj})}}]),t}();module.exports=s;
},{"events":"VhRB","./lib.js":"IJpp"}],"sfFs":[function(require,module,exports) {
function e(e,t){var l;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(l=o(e))||t&&e&&"number"==typeof e.length){l&&(e=l);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,i=!1;return{s:function(){l=e[Symbol.iterator]()},n:function(){var e=l.next();return a=e.done,e},e:function(e){i=!0,c=e},f:function(){try{a||null==l.return||l.return()}finally{if(i)throw c}}}}function o(e,o){if(e){if("string"==typeof e)return t(e,o);var l=Object.prototype.toString.call(e).slice(8,-1);return"Object"===l&&e.constructor&&(l=e.constructor.name),"Map"===l||"Set"===l?Array.from(e):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?t(e,o):void 0}}function t(e,o){(null==o||o>e.length)&&(o=e.length);for(var t=0,l=new Array(o);t<o;t++)l[t]=e[t];return l}function l(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function n(e,o){for(var t=0;t<o.length;t++){var l=o[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function r(e,o,t){return o&&n(e.prototype,o),t&&n(e,t),e}var c=require("./lib.js"),a=function(){function o(e){l(this,o),this.views=[],this.obj=e,this.type=e.constructor.name,this.obj&&this.addController()}return r(o,[{key:"addController",value:function(){this.obj.addController(this)}},{key:"eventUpdate",value:function(e,o,t){this.view_push(e),this[e](t,this.obj.obj)}},{key:"view_push",value:function(o){var t,l=e(this.views);try{for(l.s();!(t=l.n()).done;){t.value.propsUpdate(o)}}catch(n){l.e(n)}finally{l.f()}}},{key:"addView",value:function(e){this.views.push(e),e.propsUpdate()}},{key:"removeView",value:function(e){this.views.splice(this.views.indexOf(e),1)}},{key:"update",value:function(e,o,t){switch(this.type){case"model":console.log("model update (default controller)");break;case"collection":console.log("collection update (default controller)")}}},{key:"add",value:function(e,o,t){switch(this.type){case"model":console.log("model add (default controller)");break;case"collection":console.log("collection add (default controller)")}}},{key:"remove",value:function(e,o,t){switch(this.type){case"model":console.log("model remove (default controller)");break;case"collection":console.log("collection remove (default controller)")}}},{key:"destroy",value:function(e,o){switch(this.type){case"model":console.log("model destroy (Model) (default controller)");break;case"collection":console.log("collection destroy (Model) (default controller)")}}},{key:"detach",value:function(e){switch(this.type){case"model":console.log("model detach (Model) (default controller)");break;case"collection":console.log("collection detach (Model) (default controller)")}}},{key:"destroyCollection",value:function(e,o){console.log("collection destroy (Collection) (default controller)")}},{key:"load",value:function(e,o){switch(this.type){case"model":console.log("model load (default controller)");break;case"collection":console.log("collection load (default controller)")}}},{key:"save",value:function(e,o){switch(this.type){case"model":console.log("model save (default controller)");break;case"collection":console.log("collection save (default controller)")}}}]),o}();module.exports=a;
},{"./lib.js":"IJpp"}],"iSXh":[function(require,module,exports) {
function e(e,r){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=t(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function t(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var o=require("events"),l=require("./lib.js"),c=function(){function t(e,r,i){n(this,t),this.el=e,this.id=l.id(),this.controller=r,this.model=i,this.type=r.type,this.list=this.el.querySelectorAll("[bi]"),this.props=[],this.view_collection=[];for(var a=0;a<this.list.length;a++)this.props.push(this.list[a].attributes.bi.value);this.controller&&this.addView(),this.listen()}return a(t,[{key:"addView",value:function(){this.controller.addView(this)}},{key:"removeView",value:function(){this.controller.removeView(this)}},{key:"propsUpdate",value:function(e){for(var t=0;t<this.props.length;t++){var r=this.props[t].split(".");try{for(var n=this.controller.obj.obj,i=0;i<r.length;i++)n=n[r[i]];this.viewUpdate(this.props[t],n)}catch(a){console.log(a)}}}},{key:"viewUpdate",value:function(t,r){var n,i=e(this.list);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.getAttribute("bi")===t)switch(a.tagName){case"DIV":a.innerHTML!==r&&(a.innerHTML=r);break;case"SELECT":case"TEXTAREA":a.value!==r&&(a.value=r);break;case"INPUT":switch(a.getAttribute("type")){case"checkbox":"string"==typeof r&&(r="true"===r),a.checked!==r&&(a.checked=r);break;case"radio":a.value===r?a.checked=!0:a.checked=!1;break;default:a.value!==r&&(a.value=r)}}}}catch(o){i.e(o)}finally{i.f()}}},{key:"listen",value:function(){var t,r=this,n=e(this.list);try{var i=function(){var e=t.value,n=function(){for(var t={},n=e.getAttribute("bi").split("."),i=t,a=0;a<n.length;a++){var o={};a+1===n.length&&(o="INPUT"===e.tagName&&"checkbox"===e.getAttribute("type")?e.checked:e.value),i=i[n[a]]=o}r.controller.obj.update(t)};switch(e.tagName){case"SELECT":case"TEXTAREA":e.addEventListener("input",n);break;case"INPUT":switch(e.getAttribute("type")){case"checkbox":case"radio":e.addEventListener("change",n);break;default:e.addEventListener("input",n)}}};for(n.s();!(t=n.n()).done;)i()}catch(a){n.e(a)}finally{n.f()}}}]),t}();module.exports=c;
},{"events":"VhRB","./lib.js":"IJpp"}],"uMze":[function(require,module,exports) {
var e=require("./schema.js"),r=require("./model.js"),o=require("./collection.js"),l=require("./controller.js"),i=require("./view.js");module.exports={schema:e,model:r,collection:o,controller:l,view:i};
},{"./schema.js":"er3Z","./model.js":"ozwR","./collection.js":"Ta8a","./controller.js":"sfFs","./view.js":"iSXh"}],"lgAh":[function(require,module,exports) {
var e=require("../bipartite.js"),r={fruit:String,name:String,place:{type:String,default:"this place"},defaulPlace:{type:String,default:"default place"},list:Array,truthy:Boolean,untruthy:Boolean,recursive:{recursivething:String,recursivestr:String,recursive:{recursivething:String,recursivestr:String}}},t={url:"www.google.com",schema:new e.schema(r)},i={name:"ted",place:"over here",wrongplace:"should not be here",list:["jjhjh","trtrtr"],truthy:!0,untruthy:"true",recursive:{recursivething:"blah",recursivestr:6,recursive:{recursivething:"blah",recursivestr:"dsfd"}}},o={name:"billy bob jimbo",place:"over and away",wrongplace:"should not be here",list:["jjhjssssh","trtrtr"],truthy:!0,untruthy:"kss",recursive:{recursivething:"hghghghg",recursivestr:8,recursive:{recursivething:"sdd",recursivestr:"aaaa"}}},s=new e.model(i),n=new e.model(o),l=new e.controller(s);l.update=function(e){switch(this.type){case"model":console.log("model update (set in controller)");break;case"collection":console.log("collection update (set in controller)")}},l.add=function(e){switch(this.type){case"model":console.log("model added (set in controller)");break;case"collection":console.log("collection added (set in controller)")}},l.remove=function(e){switch(this.type){case"model":console.log("model removed (set in controller)");break;case"collection":console.log("collection removed (set in controller)")}};var c=new e.collection(null,t),a={fruit:"orange",name:"bob",recursive:{recursivething:"fflah",recursivestr:2,recursive:{recursivestr:"dsfffd"}}},u={fruit:!1,recursive:{recursivething:!1,recursive:{recursivestr:!1}}},d={name:"bob",recursive:{recursivething:"fflah",recursivestr:3}},h={fruit:"orange"};c.update(a),c.update(a,d),c.remove(u),c.detach(),c.findAndDetach(h),c.update(a),c.destroyCollection(),c.load(),c.save(),s.update({list:["jjhjh","jjddddhjh","trtjrtr","gfgfgfffgf"],fruit:"apple",name:"jim",more:{thing:"no",otherthing:"kaaakj",newthing:"jsjsj",list:["more jjhjh","more trtrtr"]}}),s.update({fruit:"orange",name:"bob",recursive:{recursivething:"fflah",recursivestr:2,recursive:{recursivestr:"dsfffd"}}}),s.remove(),s.destroy(),s.load(),s.save(),window.addEventListener("load",function(){if(el=document.getElementById("viewdemo"),elForm=document.getElementById("viewdemoform"),el)new e.view(el,l),new e.view(elForm,l);s.update({list:["jjhjh","jjddddhjh","trtjrtr","gfgfgfffgf"],fruit:"apple",name:"jim",more:{thing:"no",otherthing:"kaaakj",newthing:"jsjsj",list:["more jjhjh","more trtrtr"]}})});
},{"../bipartite.js":"uMze"}]},{},["lgAh"], null)
//# sourceMappingURL=/demo.6288e2b3.js.map